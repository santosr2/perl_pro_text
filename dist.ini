; Dist::Zilla configuration for Sift
; Build with: dzil build
; Release with: dzil release

name    = Sift
author  = Sift Contributors
license = MIT
copyright_holder = Sift Contributors
copyright_year   = 2024

; Version from main module
[VersionFromMainModule]

; Gather files
[GatherDir]
exclude_filename = cpanfile
exclude_filename = Makefile.PL
exclude_match = ^\.

[PruneCruft]
[ManifestSkip]

; Generate META files
[MetaYAML]
[MetaJSON]

; License and README
[License]
[Readme]
[ReadmeAnyFromPod]
type = markdown
filename = README.md
location = root

; Pod processing
[PodWeaver]
[PodSyntaxTests]
[PodCoverageTests]

; Tests
[Test::Compile]
[Test::Perl::Critic]
[Test::NoTabs]
[Test::EOL]

; Manifest
[Manifest]

; Prerequisites from cpanfile
[Prereqs::FromCPANfile]

; Provide module info
[MetaProvides::Package]

; Repository info (update with your repo)
[MetaResources]
homepage        = https://github.com/santosr2/sift
bugtracker.web  = https://github.com/santosr2/sift/issues
repository.url  = https://github.com/santosr2/sift.git
repository.web  = https://github.com/santosr2/sift
repository.type = git

; Build
[MakeMaker]
[ExecDir]
dir = bin

; Install man pages
[InstallGuide]

; Sharedir for additional files
[ShareDir]

; Version bumping
[NextRelease]
format = %-9v %{yyyy-MM-dd}d

; Git integration
[Git::Check]
allow_dirty = dist.ini
allow_dirty = Changes
allow_dirty = README.md

[Git::Commit]
commit_msg = Release %v

[Git::Tag]
tag_format = v%v
tag_message = Release %v

[Git::Push]

; Upload to CPAN
[UploadToCPAN]

; Confirmation before release
[ConfirmRelease]

; Test before release
[TestRelease]

; Check changes file
[CheckChangesHasContent]

; Clean after build
[Clean]
